"preprimary_ece"
))) %>%
arrange(age_modifier) %>%
ggplot(aes(x = value,
y = age_modifier,
fill = geography)) +
geom_col(position = position_dodge()) +
geom_text(aes(label = value), position = position_dodge(width = .9),
hjust = "inward") +
scale_fill_manual(values = c("#7ad151", "#277f8e")) +
labs(x = "Learner-to-classroom ratio",
y = "",
title = "Learner-Classroom ratio",
fill = "") +
theme(legend.position = "bottom",
axis.text.y = element_blank(),
plot.caption = element_text(hjust = 0.5)) +
plot_layout(guides = "collect") &
theme(legend.position = "bottom")
county %>%
filter(str_detect(indicator, "water") &
sex_modifier == "total" &
!str_detect(age_modifier, "national_average")) %>%
mutate(value = value / 100) %>%
mutate(age_modifier = fct_relevel(age_modifier,
c("secondary",
"primary",
"preprimary_ece"
))) %>%
arrange(age_modifier) %>%
ggplot(aes(x = value,
y = age_modifier,
fill = geography)) +
geom_col(position = position_dodge()) +
geom_text(aes(label = percent(value, accuracy = .1)),
position = position_dodge(width = .9),
hjust = "inward") +
scale_fill_manual(values = c("#7ad151")) +
labs(x = "", y = "",
title = "% of students without no access to improved water source",
fill = "") +
scale_x_continuous(labels = percent) +
theme(legend.position = "none",
plot.caption = element_text(hjust = 0.5)) +
county %>%
filter(str_detect(indicator, "institutions") & county != "National") %>%
mutate(age_modifier = fct_relevel(age_modifier,
c("secondary",
"primary",
"preprimary_ece"
))) %>%
arrange(age_modifier) %>%
ggplot(aes(x = value,
y = age_modifier)) +
geom_col(fill = "#7ad151") +
geom_text(aes(label = value),
hjust = "inward") +
labs(x = "", y = "",
title = "No. of education institutions") +
theme(axis.text.y = element_blank(),
legend.position = "none") +
county %>%
filter(str_detect(indicator, "Net")
& sex_modifier == "total") %>%
mutate(age_modifier = ifelse(all_values == "P.:111.2%,", "preprimary_ece", age_modifier),
value = ifelse(all_values == "P.:111.2%,", 111.2, value)) %>%
mutate(age_modifier = fct_relevel(age_modifier,
c("secondary",
"primary",
"preprimary_ece"
))) %>%
arrange(age_modifier) %>%
ggplot(aes(x = value,
y = age_modifier,
fill = geography)) +
geom_col(position = position_dodge()) +
geom_text(aes(label = value), position = position_dodge(width = .9),
hjust = "inward") +
scale_fill_manual(values = c("#7ad151", "#277f8e")) +
labs(x = "", y = "",
title = "Net Enrolment Rate",
fill = "") +
scale_x_continuous(labels = percent) +
theme(legend.position = "bottom",
plot.caption = element_text(hjust = 0.5)) +
county %>%
filter(str_detect(indicator, "Classroom")
& sex_modifier == "total") %>%
mutate(age_modifier = fct_relevel(age_modifier,
c("secondary",
"primary",
"preprimary_ece"
))) %>%
arrange(age_modifier) %>%
ggplot(aes(x = value,
y = age_modifier,
fill = geography)) +
geom_col(position = position_dodge()) +
geom_text(aes(label = value), position = position_dodge(width = .9),
hjust = "inward") +
scale_fill_manual(values = c("#7ad151", "#277f8e")) +
labs(x = "Learner-to-classroom ratio",
y = "",
title = "Learner-Classroom ratio",
fill = "") +
theme(legend.position = "bottom",
axis.text.y = element_blank(),
plot.caption = element_text(hjust = 0.5)) +
plot_layout(guides = "collect") &
theme(legend.position = "bottom")
county %>%
filter(str_detect(indicator, "Classroom")
& sex_modifier == "total") %>%
mutate(age_modifier = fct_relevel(age_modifier,
c("secondary",
"primary",
"preprimary_ece"
))) %>%
arrange(age_modifier) %>%
ggplot(aes(x = value,
y = age_modifier,
fill = geography)) +
geom_col(position = position_dodge()) +
geom_text(aes(label = value), position = position_dodge(width = .9),
hjust = "inward") +
scale_fill_manual(values = c("#7ad151", "#277f8e")) +
labs(x = "Learner-to-classroom ratio",
y = "",
title = "Learner-Classroom ratio",
fill = "") +
theme(legend.position = "bottom",
axis.text.y = element_blank(),
plot.caption = element_text(hjust = 0.5))
county %>%
filter(str_detect(indicator, "Net")
& sex_modifier == "total") %>%
mutate(age_modifier = ifelse(all_values == "P.:111.2%,", "preprimary_ece", age_modifier),
value = ifelse(all_values == "P.:111.2%,", 111.2, value)) %>%
mutate(age_modifier = fct_relevel(age_modifier,
c("secondary",
"primary",
"preprimary_ece"
))) %>%
arrange(age_modifier) %>%
ggplot(aes(x = value,
y = age_modifier,
fill = geography)) +
geom_col(position = position_dodge()) +
geom_text(aes(label = value), position = position_dodge(width = .9),
hjust = "inward") +
scale_fill_manual(values = c("#7ad151", "#277f8e")) +
labs(x = "", y = "",
title = "Net Enrolment Rate",
fill = "") +
scale_x_continuous(labels = percent) +
theme(legend.position = "bottom",
plot.caption = element_text(hjust = 0.5))
county %>%
filter(str_detect(indicator, "institutions") & county != "National") %>%
mutate(age_modifier = fct_relevel(age_modifier,
c("secondary",
"primary",
"preprimary_ece"
))) %>%
arrange(age_modifier) %>%
ggplot(aes(x = value,
y = age_modifier)) +
geom_col(fill = "#7ad151") +
geom_text(aes(label = value),
hjust = "inward") +
labs(x = "", y = "",
title = "No. of education institutions") +
theme(axis.text.y = element_blank(),
legend.position = "none")
county %>%
filter(str_detect(indicator, "water") &
sex_modifier == "total" &
!str_detect(age_modifier, "national_average")) %>%
mutate(value = value / 100) %>%
mutate(age_modifier = fct_relevel(age_modifier,
c("secondary",
"primary",
"preprimary_ece"
))) %>%
arrange(age_modifier) %>%
ggplot(aes(x = value,
y = age_modifier,
fill = geography)) +
geom_col(position = position_dodge()) +
geom_text(aes(label = percent(value, accuracy = .1)),
position = position_dodge(width = .9),
hjust = "inward") +
scale_fill_manual(values = c("#7ad151")) +
labs(x = "", y = "",
title = "% of students without no access to improved water source",
fill = "") +
scale_x_continuous(labels = percent) +
theme(legend.position = "none",
plot.caption = element_text(hjust = 0.5))
county %>%
filter(str_detect(indicator, "water") &
sex_modifier == "total" &
!str_detect(age_modifier, "national_average")) %>%
mutate(value = value / 100) %>%
mutate(age_modifier = fct_relevel(age_modifier,
c("secondary",
"primary",
"preprimary_ece"
))) %>%
arrange(age_modifier) %>%
ggplot(aes(x = value,
y = age_modifier,
fill = geography)) +
geom_col(position = position_dodge()) +
geom_text(aes(label = percent(value, accuracy = .1)),
position = position_dodge(width = .9),
hjust = "inward") +
scale_fill_manual(values = c("#7ad151")) +
labs(x = "", y = "",
title = "% of students without no access to improved water source",
fill = "") +
scale_x_continuous(labels = percent) +
theme(legend.position = "none",
plot.caption = element_text(hjust = 0.5))
county %>%
filter(str_detect(indicator, "water") &
sex_modifier == "total" &
!str_detect(age_modifier, "national_average")) %>%
mutate(value = value / 100) %>%
mutate(age_modifier = fct_relevel(age_modifier,
c("secondary",
"primary",
"preprimary_ece"
))) %>%
arrange(age_modifier) %>%
ggplot(aes(x = value,
y = age_modifier,
fill = geography)) +
geom_col(position = position_dodge()) +
geom_text(aes(label = percent(value, accuracy = .1)),
position = position_dodge(width = .9),
hjust = "inward") +
scale_fill_manual(values = c("#7ad151")) +
labs(x = "", y = "",
title = "% of students without no access to improved water source",
fill = "") +
scale_x_continuous(labels = percent) +
theme(legend.position = "none",
plot.caption = element_text(hjust = 0.5)) +
county %>%
filter(str_detect(indicator, "institutions") & county != "National") %>%
mutate(age_modifier = fct_relevel(age_modifier,
c("secondary",
"primary",
"preprimary_ece"
))) %>%
arrange(age_modifier) %>%
ggplot(aes(x = value,
y = age_modifier)) +
geom_col(fill = "#7ad151") +
geom_text(aes(label = value),
hjust = "inward") +
labs(x = "", y = "",
title = "No. of education institutions") +
theme(axis.text.y = element_blank(),
legend.position = "none") +
county %>%
filter(str_detect(indicator, "Net")
& sex_modifier == "total") %>%
mutate(age_modifier = ifelse(all_values == "P.:111.2%,", "preprimary_ece", age_modifier),
value = ifelse(all_values == "P.:111.2%,", 111.2, value)) %>%
mutate(age_modifier = fct_relevel(age_modifier,
c("secondary",
"primary",
"preprimary_ece"
))) %>%
arrange(age_modifier) %>%
ggplot(aes(x = value,
y = age_modifier,
fill = geography)) +
geom_col(position = position_dodge()) +
geom_text(aes(label = value), position = position_dodge(width = .9),
hjust = "inward") +
scale_fill_manual(values = c("#7ad151", "#277f8e")) +
labs(x = "", y = "",
title = "Net Enrolment Rate",
fill = "") +
scale_x_continuous(labels = percent) +
theme(legend.position = "bottom",
plot.caption = element_text(hjust = 0.5)) +
county %>%
filter(str_detect(indicator, "Classroom")
& sex_modifier == "total") %>%
mutate(age_modifier = fct_relevel(age_modifier,
c("secondary",
"primary",
"preprimary_ece"
))) %>%
arrange(age_modifier) %>%
ggplot(aes(x = value,
y = age_modifier,
fill = geography)) +
geom_col(position = position_dodge()) +
geom_text(aes(label = value), position = position_dodge(width = .9),
hjust = "inward") +
scale_fill_manual(values = c("#7ad151", "#277f8e")) +
labs(x = "Learner-to-classroom ratio",
y = "",
title = "Learner-Classroom ratio",
fill = "") +
theme(legend.position = "bottom",
axis.text.y = element_blank(),
plot.caption = element_text(hjust = 0.5)) +
plot_layout(guides = "collect") &
theme(legend.position = "bottom")
county %>%
filter(str_detect(indicator, "water") &
sex_modifier == "total" &
!str_detect(age_modifier, "national_average")) %>%
mutate(value = value / 100) %>%
mutate(age_modifier = fct_relevel(age_modifier,
c("secondary",
"primary",
"preprimary_ece"
))) %>%
arrange(age_modifier) %>%
ggplot(aes(x = value,
y = age_modifier,
fill = geography)) +
geom_col(position = position_dodge(),
fill = "#7ad151") +
geom_text(aes(label = percent(value, accuracy = .1)),
position = position_dodge(width = .9),
hjust = "inward") +
labs(x = "", y = "",
title = "% of students without no access to improved water source",
fill = "") +
scale_x_continuous(labels = percent) +
theme(legend.position = "none",
plot.caption = element_text(hjust = 0.5)) +
county %>%
filter(str_detect(indicator, "institutions") & county != "National") %>%
mutate(age_modifier = fct_relevel(age_modifier,
c("secondary",
"primary",
"preprimary_ece"
))) %>%
arrange(age_modifier) %>%
ggplot(aes(x = value,
y = age_modifier)) +
geom_col(fill = "#7ad151") +
geom_text(aes(label = value),
hjust = "inward") +
labs(x = "", y = "",
title = "No. of education institutions") +
theme(axis.text.y = element_blank(),
legend.position = "none") +
county %>%
filter(str_detect(indicator, "Net")
& sex_modifier == "total") %>%
mutate(age_modifier = ifelse(all_values == "P.:111.2%,", "preprimary_ece", age_modifier),
value = ifelse(all_values == "P.:111.2%,", 111.2, value)) %>%
mutate(age_modifier = fct_relevel(age_modifier,
c("secondary",
"primary",
"preprimary_ece"
))) %>%
arrange(age_modifier) %>%
ggplot(aes(x = value,
y = age_modifier,
fill = geography)) +
geom_col(position = position_dodge()) +
geom_text(aes(label = value), position = position_dodge(width = .9),
hjust = "inward") +
scale_fill_manual(values = c("#7ad151", "#277f8e")) +
labs(x = "", y = "",
title = "Net Enrolment Rate",
fill = "") +
scale_x_continuous(labels = percent) +
theme(legend.position = "bottom",
plot.caption = element_text(hjust = 0.5)) +
county %>%
filter(str_detect(indicator, "Classroom")
& sex_modifier == "total") %>%
mutate(age_modifier = fct_relevel(age_modifier,
c("secondary",
"primary",
"preprimary_ece"
))) %>%
arrange(age_modifier) %>%
ggplot(aes(x = value,
y = age_modifier,
fill = geography)) +
geom_col(position = position_dodge()) +
geom_text(aes(label = value), position = position_dodge(width = .9),
hjust = "inward") +
scale_fill_manual(values = c("#7ad151", "#277f8e")) +
labs(x = "Learner-to-classroom ratio",
y = "",
title = "Learner-Classroom ratio",
fill = "") +
theme(legend.position = "bottom",
axis.text.y = element_blank(),
plot.caption = element_text(hjust = 0.5)) +
plot_layout(guides = "collect") &
theme(legend.position = "bottom")
county %>%
filter(str_detect(indicator, "water") &
sex_modifier == "total" &
!str_detect(age_modifier, "national_average")) %>%
mutate(value = value / 100) %>%
mutate(age_modifier = fct_relevel(age_modifier,
c("secondary",
"primary",
"preprimary_ece"
))) %>%
arrange(age_modifier) %>%
ggplot(aes(x = value,
y = age_modifier,
fill = geography)) +
geom_col(position = position_dodge(),
fill = "#7ad151") +
geom_text(aes(label = percent(value, accuracy = .1)),
position = position_dodge(width = .9),
hjust = "inward") +
labs(x = "", y = "",
title = "% of students without no \nAccess to improved water source",
fill = "") +
scale_x_continuous(labels = percent) +
theme(legend.position = "none",
plot.caption = element_text(hjust = 0.5)) +
county %>%
filter(str_detect(indicator, "institutions") & county != "National") %>%
mutate(age_modifier = fct_relevel(age_modifier,
c("secondary",
"primary",
"preprimary_ece"
))) %>%
arrange(age_modifier) %>%
ggplot(aes(x = value,
y = age_modifier)) +
geom_col(fill = "#7ad151") +
geom_text(aes(label = value),
hjust = "inward") +
labs(x = "", y = "",
title = "No. of education institutions") +
theme(axis.text.y = element_blank(),
legend.position = "none") +
county %>%
filter(str_detect(indicator, "Net")
& sex_modifier == "total") %>%
mutate(age_modifier = ifelse(all_values == "P.:111.2%,", "preprimary_ece", age_modifier),
value = ifelse(all_values == "P.:111.2%,", 111.2, value)) %>%
mutate(age_modifier = fct_relevel(age_modifier,
c("secondary",
"primary",
"preprimary_ece"
))) %>%
arrange(age_modifier) %>%
ggplot(aes(x = value,
y = age_modifier,
fill = geography)) +
geom_col(position = position_dodge()) +
geom_text(aes(label = value), position = position_dodge(width = .9),
hjust = "inward") +
scale_fill_manual(values = c("#7ad151", "#277f8e")) +
labs(x = "", y = "",
title = "Net Enrolment Rate",
fill = "") +
scale_x_continuous(labels = percent) +
theme(legend.position = "bottom",
plot.caption = element_text(hjust = 0.5)) +
county %>%
filter(str_detect(indicator, "Classroom")
& sex_modifier == "total") %>%
mutate(age_modifier = fct_relevel(age_modifier,
c("secondary",
"primary",
"preprimary_ece"
))) %>%
arrange(age_modifier) %>%
ggplot(aes(x = value,
y = age_modifier,
fill = geography)) +
geom_col(position = position_dodge()) +
geom_text(aes(label = value), position = position_dodge(width = .9),
hjust = "inward") +
scale_fill_manual(values = c("#7ad151", "#277f8e")) +
labs(x = "Learner-to-classroom ratio",
y = "",
title = "Learner-Classroom ratio",
fill = "") +
theme(legend.position = "bottom",
axis.text.y = element_blank(),
plot.caption = element_text(hjust = 0.5)) +
plot_layout(guides = "collect") &
theme(legend.position = "bottom")
county %>% write_csv(paste0(
"./data/",
str_to_lower(county_name),
"_county_",
format(Sys.Date(), "%Y%m%d"),
".csv"))
library(tidyverse)
library(rKenyaCensus)
rKenyaCensus::DataCatalogue %>% glimpse()
rKenyaCensus::DataCatalogue %>%
filter(str_detect(Dataset.Description, "county|County"))
rKenyaCensus::DataCatalogue %>%
filter(str_detect(Dataset.Description, "sub-county|Sub-county"))
rKenyaCensus::DataCatalogue %>%
filter(str_detect(Dataset.Description, "sub-county|Sub-County"))
