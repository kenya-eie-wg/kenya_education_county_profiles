"0",""
"0",""
"0","enrolment <- rbind("
"0","# Preprimary enrolments"
"0","read_excel(""./data/ocr_tables/enrolment_public_preprimary.xlsx"") %>% "
"0","  clean_names() %>% "
"0","  pivot_longer(cols = pp1_boys:total, "
"0","               names_to = ""grade"", "
"0","               values_to = ""enrolment"") %>% "
"0","  mutate(sex_modifier = case_when(str_detect(grade, ""boys"") ~ ""boys"", "
"0","                                  str_detect(grade, ""girls"") ~ ""girls"", "
"0","                                  str_detect(grade, ""total"") ~ ""total""), "
"0","          age_modifier = ""preprimary"","
"0","         public_private = ""public"") %>% "
"0","  mutate(grade = str_replace_all(grade, ""pp"", ""preprimary""), "
"0","         grade = recode(grade, "
"0","                        ""total_boys"" = ""preprimary_total_boys"", "
"0","                        ""total_girls"" = ""preprimary_total_girls"","
"0","                        ""total"" = ""preprimary_total"")),"
"0",""
"0","read_excel(""./data/ocr_tables/enrolment_private_preprimary.xlsx"") %>% "
"0","  setNames(c(""county"", ""pp1_boys"", ""pp1_girls"", ""pp1_total"", "
"0","             ""pp2_boys"", ""pp2_girls"", ""pp2_total"", "
"0","             ""total_boys"", ""total_girls"", ""total"")) %>% "
"0","  slice(2:48) %>% "
"0","  pivot_longer(cols = pp1_boys:total, "
"0","               names_to = ""grade"", "
"0","               values_to = ""enrolment"") %>% "
"0","  mutate(sex_modifier = case_when(str_detect(grade, ""boys"") ~ ""boys"", "
"0","                                  str_detect(grade, ""girls"") ~ ""girls"", "
"0","                                  str_detect(grade, ""total"") ~ ""total""), "
"0","         age_modifier = ""preprimary"", "
"0","         public_private = ""private"") %>% "
"0","  mutate(grade = str_replace_all(grade, ""pp"", ""preprimary""),"
"0","         grade = recode(grade, "
"0","                        ""total_boys"" = ""preprimary_total_boys"", "
"0","                        ""total_girls"" = ""preprimary_total_girls"","
"0","                        ""total"" = ""preprimary_total"")),"
"0","         "
"0","# Primary enrolments "
"0",""
"0","read_excel(""./data/ocr_tables/enrolment_boys_grade1_6_public_primary_schools.xlsx"") %>% "
"0","  primary_enrolments() %>% "
"0","  mutate(public_private = ""public"", "
"0","         sex_modifier = ""boys"", "
"0","         sex_modifier = ifelse(str_detect(grade, ""primary_total""), ""total"", sex_modifier), "
"0","         grade = paste0(grade, ""_"", sex_modifier)), "
"0",""
"0","read_excel(""./data/ocr_tables/enrolment_girls_grade1_6_public_primary_schools.xlsx"") %>% "
"0","  primary_enrolments() %>% "
"0","  mutate(public_private = ""public"", "
"0","         sex_modifier = ""girls"", "
"0","         sex_modifier = ifelse(str_detect(grade, ""primary_total""), ""total"", sex_modifier), "
"0","         grade = paste0(grade, ""_"", sex_modifier)), "
"0",""
"0","read_excel(""./data/ocr_tables/enrolment_boys_grade1_6_private_primary_schools.xlsx"") %>% "
"0","  primary_enrolments() %>% "
"0","  mutate(public_private = ""private"", "
"0","         sex_modifier = ""boys"", "
"0","         sex_modifier = ifelse(str_detect(grade, ""primary_total""), ""total"", sex_modifier), "
"0","         grade = paste0(grade, ""_"", sex_modifier)), "
"0",""
"0","read_excel(""./data/ocr_tables/enrolment_girls_grade1_6_private_primary_schools.xlsx"") %>% "
"0","  primary_enrolments() %>% "
"0","  mutate(public_private = ""private"", "
"0","         sex_modifier = ""girls"", "
"0","         sex_modifier = ifelse(str_detect(grade, ""primary_total""), ""total"", sex_modifier), "
"0","         grade = paste0(grade, ""_"", sex_modifier)), "
"0",""
"0",""
"0","# Lower secondary enrolments "
"0","read_excel(""./data/ocr_tables/enrolment_grade_7_8_public_lower_secondary.xlsx"") %>% "
"0","  setNames(lower_secondary_names) %>% "
"0","  slice(2:49) %>% "
"0","  pivot_longer(cols = grade_7_boys:lower_secondary_total, "
"0","              names_to = ""grade"", "
"0","              values_to = ""enrolment"") %>% "
"0","  mutate(public_private = ""public"", "
"0","         age_modifier = ""primary"","
"0","         sex_modifier = case_when(str_detect(grade, ""boys"") ~ ""boys"", "
"0","                                  str_detect(grade, ""girls"") ~ ""girls"", "
"0","                                  str_detect(grade, ""total"") ~ ""total"")), "
"0",""
"0","read_excel(""./data/ocr_tables/enrolment_grade_7_8_private_lower_secondary.xlsx"") %>% "
"0","  setNames(lower_secondary_names) %>% "
"0","  slice(2:49) %>% "
"0","  pivot_longer(cols = grade_7_boys:lower_secondary_total, "
"0","              names_to = ""grade"", "
"0","              values_to = ""enrolment"") %>% "
"0","  mutate(public_private = ""private"", "
"0","         age_modifier = ""primary"","
"0","         sex_modifier = case_when(str_detect(grade, ""boys"") ~ ""boys"", "
"0","                                  str_detect(grade, ""girls"") ~ ""girls"", "
"0","                                  str_detect(grade, ""total"") ~ ""total"")),         "
"0","# Secondary enrolments"
"0","read_excel(""./data/ocr_tables/enrolment_public_secondary.xlsx"") %>% "
"0","  clean_names() %>%"
"0","  pivot_longer(cols = form_1_boys:total, "
"0","               names_to = ""grade"", "
"0","               values_to = ""enrolment"") %>% "
"0","   mutate(grade = str_replace_all(grade, ""form_"", ""form""), "
"0","         age_modifier = ""secondary"","
"0","         sex_modifier = case_when(str_detect(grade, ""total"") ~ ""total"","
"0","                                  str_detect(grade, ""boys"") ~ ""boys"", "
"0","                                  str_detect(grade, ""girls"") ~ ""girls""), "
"0","         public_private = ""public"","
"0","         grade = ifelse(str_detect(grade, ""total"") & !str_detect(grade, ""_""), "
"0","                        ""secondary_total"", "
"0","                        grade)),"
"0",""
"0","read_excel(""./data/ocr_tables/enrolment_private_secondary.xlsx"") %>% "
"0","  clean_names() %>%"
"0","  pivot_longer(cols = form_1_boys:total, "
"0","               names_to = ""grade"", "
"0","               values_to = ""enrolment"") %>% "
"0","  mutate(grade = str_replace_all(grade, ""form_"", ""form""), "
"0","         age_modifier = ""secondary"","
"0","         sex_modifier = case_when(str_detect(grade, ""total"") ~ ""total"","
"0","                                  str_detect(grade, ""boys"") ~ ""boys"", "
"0","                                  str_detect(grade, ""girls"") ~ ""girls""), "
"0","         public_private = ""private"","
"0","         grade = ifelse(str_detect(grade, ""total"") & !str_detect(grade, ""_""), "
"0","                        ""secondary_total"", "
"0","                        grade))"
"0",") %>% "
"0","  "
"0","  mutate(enrolment = as.numeric(enrolment)) %>% "
"0","  mutate(county = case_when(county == ""Kaiiado"" ~ ""Kajiado"", "
"0","                            county == ""Nairobi Citv"" ~ ""Nairobi City"", "
"0","                            county == ""Nvamira"" ~ ""Nyamira"", "
"0","                            county == ""Siava"" ~ ""Siaya"", "
"0","                            county == ""Waiir"" ~ ""Wajir"", "
"0","                            "
"0","                            TRUE ~ county))"
"2","New names:"
"2","New names:"
"2","New names:"
